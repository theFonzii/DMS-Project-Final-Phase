<?xml version="1.0" encoding="UTF-8"?>

<!--
 * David Alfonsi
 * CEN 3024C - Software Development 1
 * December 3rd, 2025
 * app.fxml
 * Single-screen GUI implementing Menu, Tables, Forms.
 * Controller populates column cell factories and button logic.
-->

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.dms_project_final_phase.AppController">

    <!-- TOP: DB connection bar -->
    <top>
        <HBox spacing="10" styleClass="top-bar" BorderPane.alignment="CENTER">
            <children>
                <Label text="SQLite DB Path:"/>
                <TextField fx:id="dbPathField" promptText="C:\path\to\runescape_items.db"
                           HBox.hgrow="ALWAYS"/>
                <Button fx:id="connectButton" text="Connect" onAction="#onConnectClicked"/>
                <Button text="Refresh" onAction="#onRefreshClicked"/>
            </children>
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
        </HBox>
    </top>

    <!-- CENTER: Table of items -->
    <center>
        <TableView fx:id="itemTable" BorderPane.alignment="CENTER">
            <columns>
                <TableColumn fx:id="idColumn" text="ID" prefWidth="60"/>
                <TableColumn fx:id="nameColumn" text="Name" prefWidth="170"/>
                <TableColumn fx:id="typeColumn" text="Type" prefWidth="90"/>
                <TableColumn fx:id="levelColumn" text="Req Lvl" prefWidth="70"/>
                <TableColumn fx:id="weightColumn" text="Weight (kg)" prefWidth="100"/>
                <TableColumn fx:id="priceColumn" text="GE Price" prefWidth="100"/>
            </columns>
        </TableView>
    </center>

    <!-- RIGHT: Item editor + CRUD buttons -->
    <right>
        <VBox spacing="8" styleClass="item-editor" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="10" right="15" bottom="10" left="10"/>
            </padding>
            <children>
                <Label text="Item Editor" styleClass="section-title"/>

                <GridPane hgap="6" vgap="6">
                    <columnConstraints>
                        <ColumnConstraints halignment="RIGHT"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints/>
                        <RowConstraints/>
                        <RowConstraints/>
                        <RowConstraints/>
                        <RowConstraints/>
                        <RowConstraints/>
                    </rowConstraints>

                    <children>
                        <Label text="ID:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <TextField fx:id="idField" promptText="1001"
                                   GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="Name:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <TextField fx:id="nameField" promptText="Rune Scimitar"
                                   GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Type:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <ComboBox fx:id="typeCombo" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="Req. Level:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <TextField fx:id="levelField" promptText=">= 0"
                                   GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                        <Label text="Weight (kg):" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                        <TextField fx:id="weightField" promptText=">= 0.0"
                                   GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                        <Label text="GE Price:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                        <TextField fx:id="priceField" promptText=">= 0"
                                   GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                    </children>
                </GridPane>

                <HBox spacing="8">
                    <Button text="Add" onAction="#onAddClicked" HBox.hgrow="ALWAYS"/>
                    <Button text="Update" onAction="#onUpdateClicked" HBox.hgrow="ALWAYS"/>
                    <Button text="Delete" onAction="#onDeleteClicked" HBox.hgrow="ALWAYS"/>
                </HBox>

                <Separator/>

                <Label text="Backpack Summary" styleClass="section-title"/>
                <Button text="Recalculate Backpack" onAction="#onBackpackCalcClicked"/>
                <Label fx:id="backpackSummaryLabel" wrapText="true"
                       text="Weight: 0.00 / 30.00 kg (OK), Total GE: 0, Remaining: 30.00 kg"/>
            </children>
        </VBox>
    </right>

    <!-- BOTTOM: Status bar -->
    <bottom>
        <HBox spacing="10" styleClass="status-bar" BorderPane.alignment="CENTER_LEFT">
            <padding>
                <Insets top="6" right="10" bottom="6" left="10"/>
            </padding>
            <children>
                <Label text="Status:"/>
                <Label fx:id="statusLabel" text="Not connected."/>
            </children>
        </HBox>
    </bottom>

</BorderPane>
